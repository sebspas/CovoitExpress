{% extends 'template.twig' %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col s12 m4 low">
            <div class="card center padding-card blue-card darken-1">
                <div class="card-image">
                    {% if user.img == "avatar.png"  %}
                    <img class="size-img avatar center" src="webroot/images/{{ user.img }}">
                    {% else %}
                    <img class="size-img avatar center" src="{{ user.img }}">
                    {% endif %}
                </div>
                <div class="center card-content white-text">Hello {{ user.pseudo }}! You currently have ${{ user.money }} on your account.</div>
                
                <div class="divider"></div>
                <h4 class="style-white">Your information</h4>
                <table>
                    <tbody>
                        <tr>
                            <td>
                                Current City:
                            </td>
                            <td>
                                {{ user.city }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Account Mail:
                            </td>
                            <td>
                                {{ user.mail }}
                            </td>
                        </tr>
                        <tr>
                            <td>
                                Phone Number:
                            </td>
                            <td>
                                {{ user.phone }}
                            </td>
                        </tr>
                    </tbody>
                </table>

                <h4 class="style-white">Your preferences</h4>
                {% if preferences == NULL  %}
                <div class="center card-content white-text">You have set no preferences yet.</div>
                {% else %}
                <table>
                    <tbody>
                    {% for pref in preferences %}
                        <tr>
                            <td>
                                <img class="size-sign center" src="{{ pref.img }}">
                            </td>
                            <td>
                                {{ pref.name }}
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                {% endif %}
            </div>                
        </div>

        <div class="col s12 m8 card grey-card darken-1 low">
            <h4 class="style-white">Trips as driver</h4>
            <div class="divider"></div>
            {% if drivertrips == NULL  %}
            <div class="center card-content white-text">You have created no travel yet.</div>
            {% else %}
            <table>
                <tbody>
                {% for dtrip in drivertrips %}
                    <tr>
                        <td>
                            {{ dtrip.startcity }} - {{ dtrip.endcity }}
                        </td>
                        <td>
                            Depart: {{ dtrip.starttime|date("m/d/Y G:i", "America/New_York") }}
                        </td>
                        <td>
                            Price: ${{ dtrip.price }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>

        <div class="col s12 m8 card grey-card darken-1 low">
            <h4 class="style-white">Trips as passenger</h4>
            <div class="divider"></div>
            {% if passtrips == NULL  %}
            <div class="center card-content white-text">You have booked no travel yet.</div>
            {% else %}
            <table>
                <tbody>
                {% for ptrip in passtrips %}
                    <tr>
                        <td>
                            {{ ptrip.startcity }} - {{ ptrip.endcity }}
                        </td>
                        <td>
                            Depart: {{ ptrip.starttime|date("m/d/Y G:i", "America/New_York") }}
                        </td>
                        <td>
                            Price: ${{ ptrip.price }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}